<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mis Ventas</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/ventas.css}">
</head>
<body>
    <div class="layout">
        <div class="sidebar">
            <a th:href="@{/home}" class="button">Home</a>
            <a th:href="@{/ventas/registrar}" class="button">Nueva Venta</a>
            <a th:href="@{/producto}" class="button">Productos</a>
            <a th:href="@{/empleado/lista}" class="button">Empleados</a>
            <a th:href="@{/ventas/resumen}" class="button">Resumen Ventas</a>

            <a th:href="@{/ventas/exportar-mis-ventas-pdf}" class="button">ğŸ“„ Descargar PDF</a>
        </div>

        <div class="card">
            <h1>Mis Ventas Registradas</h1>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th>Total Venta</th>
                        <th>Fecha</th>
                    </tr>
                </thead>

<tbody>
<tr th:each="venta : ${ventas}">
    <td th:text="${venta.id}"></td>

    <!-- Productos -->
    <td>
        <span th:each="detalle, iter : ${venta.detalles}">
            <span th:text="${detalle.inventario.producto.nombre}"></span>
            <span th:if="${!iter.last}">, </span>
        </span>
    </td>

    <!-- Cantidades -->
    <td>
        <span th:each="detalle, iter : ${venta.detalles}">
            <span th:text="${detalle.cantidad}"></span>
            <span th:if="${!iter.last}">, </span>
        </span>
    </td>

    <!-- Total -->
    <td th:text="'$' + ${#numbers.formatDecimal(venta.totalVenta, 0, 'COMMA', 0, 'POINT')}"></td>

    <!-- Fecha -->
    <td th:text="${#temporals.format(venta.fecha, 'dd/MM/yyyy HH:mm')}"></td>
</tr>
</tbody>
            </table>

            <a th:href="@{/home}" class="volver-home">â† Volver al inicio</a>
        </div>
    </div>
</body>
</html>
